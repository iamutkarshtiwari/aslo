<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="https://preview.addons.mozilla.org/" />
<title>verify_publishing_an_add-on_to_a _new_collection</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">verify_publishing_an_add-on_to_a _new_collection</td></tr>
</thead><tbody>
<!--Description:This testcase verifies publishing an add-on to a new collection from the add-on detail page works fine.-->
<!--Navigate to the homepage..-->
<tr>
	<td>open</td>
	<td>/en-US/firefox</td>
	<td></td>
</tr>
<!--Check if tester is already logged in.If yes,log out.-->
<tr>
	<td>storeElementPresent</td>
	<td>link=Log in</td>
	<td>status</td>
</tr>
<tr>
	<td>gotoIf</td>
	<td>&quot;${status}&quot;==&quot;true&quot;</td>
	<td>target</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>link=Log out</td>
	<td></td>
</tr>
<tr>
	<td>label</td>
	<td>target</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>link=Log in</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>LoginEmail</td>
	<td>amo.testing@gmail.com</td>
</tr>
<tr>
	<td>type</td>
	<td>LoginPassword</td>
	<td>1234</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>css=#login button[type=&quot;submit&quot;]</td>
	<td></td>
</tr>
<!--Click on the first addon listed under the recommended section-->
<tr>
	<td>clickAndWait</td>
	<td>css=div.recommended h3 a</td>
	<td></td>
</tr>
<tr>
	<td>storeLocation</td>
	<td>addon_url</td>
	<td></td>
</tr>
<tr>
	<td>echo</td>
	<td>The URL of the add-on is: ${addon_url}</td>
	<td></td>
</tr>
<tr>
	<td>storeText</td>
	<td>css=#mozilla-com h2.addon span</td>
	<td>name</td>
</tr>
<tr>
	<td>echo</td>
	<td>Title of the addon selected: ${name}</td>
	<td></td>
</tr>
<!--Publish the add-on to a new collection-->
<tr>
	<td>select</td>
	<td>publish_to</td>
	<td>label=New Collection...</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>css=#coll_publish div button</td>
	<td></td>
</tr>
<!--Provide collection details...-->
<tr>
	<td>type</td>
	<td>CollectionName</td>
	<td>collection_name</td>
</tr>
<tr>
	<td>type</td>
	<td>CollectionDescription</td>
	<td>collection_description</td>
</tr>
<!--Ensure that the add-on selected checkbox is checked-->
<tr>
	<td>verifyChecked</td>
	<td>css=input[type=&quot;checkbox&quot;]</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>//input[@value='Create Collection']</td>
	<td></td>
</tr>
<tr>
	<td>verifyTitle</td>
	<td>regexpi:collection_name.*</td>
	<td></td>
</tr>
<tr>
	<td>verifyLocation</td>
	<td>regexpi:.*/en-US/firefox/collections/view.*</td>
	<td></td>
</tr>
<!--Click on the listed add-on to navigate to its details page-->
<tr>
	<td>clickAndWait</td>
	<td>css=div.item h4 a</td>
	<td></td>
</tr>
<!--Ensure that the add-on associated with the collection is the same one you published.-->
<tr>
	<td>verifyTitle</td>
	<td>regexpi:.*Add-ons for firefox</td>
	<td></td>
</tr>
<tr>
	<td>verifyText</td>
	<td>//body[@id='mozilla-com']/div[1]/h2/span</td>
	<td>${name}</td>
</tr>
<tr>
	<td>verifyLocation</td>
	<td>regexpi:${addon_url}.*</td>
	<td></td>
</tr>
<!--log out-->
<tr>
	<td>clickAndWait</td>
	<td>link=Log out</td>
	<td></td>
</tr>
<!--back to homepage-->
<tr>
	<td>open</td>
	<td>/en-US/firefox</td>
	<td></td>
</tr>
<tr>
	<td>echo</td>
	<td>DONE</td>
	<td></td>
</tr>

</tbody></table>
</body>
</html>
